const a0_0x48af=['close','appRootPath','get','CIRCLECI','configuration','cacheDirectory','@nrwl/workspace/src/utils/app-root','apiAxiosInstance','@nrwl/workspace/src/tasks-runner/empty-reporter','ECONNABORTED','\x20(code:\x20','See\x20run\x20details\x20at\x20','VERBOSE_LOGGING','runContext','response','bold','createReadStream','tasksRunnerV2','decryptFile','endTask','apply','assign','all','put','readFileSync','defineProperty','@nrwl/workspace/src/tasks-runner/default-reporter','startsWith','uploadFile','cacheableOperations','runUrl','chalk','env','NX_CLOUD_NO_TIMEOUTS','prototype','TRAVIS_PULL_REQUEST','startRun','output','\x20were\x20retrieved\x20from\x20Nx\x20Cloud.','argv','hashDetails','complete','keys','gray','extractErrorMessage','@nrwl/workspace/src/utils/output','reduce','hash','RunOneReporter','printResults','anyErrors','apiError','scan','createDecipheriv','GET','local-cache-hit','CIRCLE_WORKFLOW_ID','version','note','Subject','update','resolve','/nx-cloud/runs/start','endTime','printCacheHitsMessage','randomBytes','filter','NX_BRANCH','/nx-cloud/runs/end','tasks','true','NX_CLOUD_AUTH_TOKEN','concat','NX_VERBOSE_LOGGING','slice','dirname','createCommitFile','showUsageWarnings','@nrwl/nx-cloud','aes-256-cbc','\x20--','writeFileSync','.\x20Read\x20only\x20token\x20is\x20used.','platform','urls','value','encryption','cache-miss','Nx\x20Cloud\x20Problems','throw','push','post','NX_RUN_GROUP','nxCloudVersion','machineInfo','messages','hasEncryption','node-machine-id','Invalid\x20Nx\x20Cloud\x20response:\x20','Cannot\x20find\x20task\x20','downloadFile','uniqRunId','addNewline','encryptionKey','next','...\x0aTRUNCATED','store','message','stringify','createFileName','NX_INVOKED_BY_RUNNER','toISOString','subscribe','then','devDependencies','length','statuses','crypto','keyword','DefaultReporter','EAI_AGAIN','code','ECONNREFUSED','patchReporters','.cache','writeOutputTitle','storage','startTask','@nrwl/workspace/src/tasks-runner/run-one-reporter','join','.tar.gz','path','find','data','encryptFile','Invalid\x20end\x20run\x20response:\x20','toString','remote-cache-hit','target','accessToken','__awaiter','\x20projects','from','Nx\x20Cloud:\x20Skipping\x20storing\x20','CIRCLE_PR_NUMBER','CIRCLE_PULL_REQUEST','collectTerminalOutput','cacheError','Could\x20not\x20decrypt\x20the\x20artifact.\x20Please\x20check\x20your\x20encryption\x20key.','axios','pipe','findSimilarTasks','waitForStoreRequestsToComplete','projectName','ENOTFOUND','CI_MERGE_REQUEST_SOURCE_BRANCH_NAME','TRAVIS_BUILD_ID','__esModule','api','createFile','Cannot\x20connect\x20to\x20remote\x20cache\x20(scope:\x20','to32bytes','printMessages','Nx\x20Cloud:\x20Downloading\x20','getTerminalOutput','url','node_modules','stream','\x20CLOUD\x20','final','rxjs','EmptyReporter','retrieve','options','error','grey','done','unknown','cacheStatus','canTrackAnalytics','CIRCLE_BRANCH','terminalOutput','endRun','colors','storeRequests','package.json','MAX_CHARACTERS','status'];(function(_0x16226c,_0x48afc2){const _0x509eff=function(_0x494d33){while(--_0x494d33){_0x16226c['push'](_0x16226c['shift']());}};_0x509eff(++_0x48afc2);}(a0_0x48af,0xc1));const a0_0x509e=function(_0x16226c,_0x48afc2){_0x16226c=_0x16226c-0x0;let _0x509eff=a0_0x48af[_0x16226c];return _0x509eff;};'use strict';var __awaiter=this&&this[a0_0x509e('0x87')]||function(_0x171c6b,_0x6c3496,_0x2509a1,_0x4c67ad){function _0x878d13(_0x4fcd56){return _0x4fcd56 instanceof _0x2509a1?_0x4fcd56:new _0x2509a1(function(_0x5189c1){_0x5189c1(_0x4fcd56);});}return new(_0x2509a1||(_0x2509a1=Promise))(function(_0xa4438e,_0x4b1769){function _0x448e72(_0x3d91a5){try{_0xa6b5e5(_0x4c67ad[a0_0x509e('0x63')](_0x3d91a5));}catch(_0x174e70){_0x4b1769(_0x174e70);}}function _0xad30a0(_0x5b77fa){try{_0xa6b5e5(_0x4c67ad[a0_0x509e('0x54')](_0x5b77fa));}catch(_0x3c6c10){_0x4b1769(_0x3c6c10);}}function _0xa6b5e5(_0x517f2d){_0x517f2d[a0_0x509e('0xab')]?_0xa4438e(_0x517f2d[a0_0x509e('0x50')]):_0x878d13(_0x517f2d['value'])['then'](_0x448e72,_0xad30a0);}_0xa6b5e5((_0x4c67ad=_0x4c67ad[a0_0x509e('0xf')](_0x171c6b,_0x6c3496||[]))['next']());});};Object[a0_0x509e('0x14')](exports,a0_0x509e('0x98'),{'value':!![]});const tasks_runner_v2_1=require('@nrwl/workspace/src/tasks-runner/tasks-runner-v2');const app_root_1=require(a0_0x509e('0x1'));const output_1=require(a0_0x509e('0x28'));const crypto=require(a0_0x509e('0x70'));const fs=require('fs');const node_machine_id_1=require(a0_0x509e('0x5c'));const os=require('os');const path=require(a0_0x509e('0x7e'));const path_1=require('path');const rxjs_1=require(a0_0x509e('0xa5'));const uuid_1=require('uuid');const axios=require(a0_0x509e('0x90'));const tar=require('tar');const chalk=require(a0_0x509e('0x1a'));const INVOKED_BY_RUNNER=!!process[a0_0x509e('0x1b')][a0_0x509e('0x69')];const NX_CLOUD_NO_TIMEOUTS=process['env'][a0_0x509e('0x1c')]===a0_0x509e('0x41');const UNLIMITED_TIMEOUT=0x98967f;class CloudApi{constructor(_0x51abcf,_0x431f38,_0x56b45c,_0x32d30f,_0x43f60e){this[a0_0x509e('0x5a')]=_0x51abcf;this['runContext']=_0x431f38;this[a0_0x509e('0x59')]=_0x43f60e;this[a0_0x509e('0x2')]=axios['create']({'baseURL':_0x56b45c,'timeout':NX_CLOUD_NO_TIMEOUTS?UNLIMITED_TIMEOUT:0x2710,'headers':{'authorization':_0x32d30f}});}[a0_0x509e('0x1f')](_0x33d47b){return __awaiter(this,void 0x0,void 0x0,function*(){try{const _0x5156e7=yield this[a0_0x509e('0x2')][a0_0x509e('0x56')](a0_0x509e('0x39'),{'meta':{'nxCloudVersion':this['nxCloudVersion']()},'hashes':_0x33d47b});if(_0x5156e7[a0_0x509e('0x80')]&&_0x5156e7[a0_0x509e('0x80')][a0_0x509e('0x66')]){this[a0_0x509e('0x5a')][a0_0x509e('0x66')]=_0x5156e7[a0_0x509e('0x80')]['message'];}if(!_0x5156e7[a0_0x509e('0x80')]||!_0x5156e7[a0_0x509e('0x80')][a0_0x509e('0x4f')]){this[a0_0x509e('0x5a')][a0_0x509e('0x2e')]=a0_0x509e('0x5d')+JSON[a0_0x509e('0x67')](_0x5156e7[a0_0x509e('0x80')]);return{};}return _0x5156e7[a0_0x509e('0x80')]['urls'];}catch(_0x3f7709){this[a0_0x509e('0x5a')][a0_0x509e('0x2e')]=this[a0_0x509e('0x5a')]['extractErrorMessage'](_0x3f7709,'api');return{};}});}[a0_0x509e('0xb1')](_0x26335b,_0xa48a74){return __awaiter(this,void 0x0,void 0x0,function*(){try{if(this[a0_0x509e('0x5a')]['apiError'])return;const _0x2c2ef3=yield this[a0_0x509e('0x2')]['post'](a0_0x509e('0x3f'),{'meta':{'nxCloudVersion':this['nxCloudVersion']()},'tasks':_0xa48a74,'run':_0x26335b,'machineInfo':this['machineInfo']});if(_0x2c2ef3[a0_0x509e('0x80')]&&_0x2c2ef3[a0_0x509e('0x80')][a0_0x509e('0xb6')]){if(_0x2c2ef3[a0_0x509e('0x80')]['status']!=='success'){this['messages'][a0_0x509e('0x2e')]='Invalid\x20end\x20run\x20response:\x20'+JSON[a0_0x509e('0x67')](_0x2c2ef3[a0_0x509e('0x80')][a0_0x509e('0x66')]);}else{if(_0x2c2ef3['data'][a0_0x509e('0x19')]){this[a0_0x509e('0x8')][a0_0x509e('0x19')]=_0x2c2ef3[a0_0x509e('0x80')][a0_0x509e('0x19')];}}}else if(_0x2c2ef3[a0_0x509e('0x80')]&&typeof _0x2c2ef3[a0_0x509e('0x80')]==='string'){if(_0x2c2ef3['data']!=='success'){this[a0_0x509e('0x5a')]['apiError']=a0_0x509e('0x82')+JSON[a0_0x509e('0x67')](_0x2c2ef3['data']);}}else{this[a0_0x509e('0x5a')][a0_0x509e('0x2e')]=a0_0x509e('0x82')+JSON[a0_0x509e('0x67')](_0x2c2ef3[a0_0x509e('0x80')]);}}catch(_0x572958){this[a0_0x509e('0x5a')][a0_0x509e('0x2e')]=this['messages'][a0_0x509e('0x27')](_0x572958,a0_0x509e('0x99'));}});}[a0_0x509e('0x58')](){try{const _0x34d252=JSON['parse'](fs[a0_0x509e('0x13')](a0_0x509e('0xb4'))[a0_0x509e('0x83')]());return _0x34d252[a0_0x509e('0x6d')][a0_0x509e('0x49')];}catch(_0x5a5ed3){return a0_0x509e('0xac');}}[a0_0x509e('0x92')](_0x300294){return __awaiter(this,void 0x0,void 0x0,function*(){try{if(this[a0_0x509e('0x5a')][a0_0x509e('0x2e')])return null;const _0x1197de=yield this['apiAxiosInstance']['post']('/nx-cloud/find-similar-tasks',{'task':{'target':_0x300294[a0_0x509e('0x85')],'projectName':_0x300294[a0_0x509e('0x94')],'hash':_0x300294[a0_0x509e('0x2a')],'hashDetails':_0x300294[a0_0x509e('0x23')]}});if(!_0x1197de[a0_0x509e('0x80')]){this[a0_0x509e('0x5a')][a0_0x509e('0x2e')]=a0_0x509e('0x82')+JSON[a0_0x509e('0x67')](_0x1197de[a0_0x509e('0x80')]);}return _0x1197de['data'][a0_0x509e('0x66')];}catch(_0x3f05a7){this[a0_0x509e('0x5a')][a0_0x509e('0x2e')]=this['messages']['extractErrorMessage'](_0x3f05a7,a0_0x509e('0x99'));return null;}});}}class E2EEncryption{constructor(_0x21cfe0){if(_0x21cfe0){this['encryptionKey']=this[a0_0x509e('0x9c')](_0x21cfe0);}}[a0_0x509e('0x9c')](_0xf2d8d3){let _0x18b2e2=_0xf2d8d3;while(_0x18b2e2['length']<0x20){_0x18b2e2+=_0xf2d8d3;}return Buffer[a0_0x509e('0x89')](_0x18b2e2)[a0_0x509e('0x45')](0x0,0x20);}['hasEncryption'](){return!!this[a0_0x509e('0x62')];}[a0_0x509e('0x81')](_0x5ba427){const _0x594b0d=crypto[a0_0x509e('0x3c')](0x10);const _0x4292c=crypto['createCipheriv'](a0_0x509e('0x4a'),this[a0_0x509e('0x62')],_0x594b0d);const _0x3f5a2d=fs[a0_0x509e('0x13')](_0x5ba427);const _0x138412=_0x4292c[a0_0x509e('0x37')](_0x3f5a2d);const _0x2d9e61=Buffer['concat']([_0x594b0d,_0x138412,_0x4292c[a0_0x509e('0xa4')]()]);fs[a0_0x509e('0x4c')](_0x5ba427,_0x2d9e61);}['decryptFile'](_0x736346){const _0x59c021=fs[a0_0x509e('0x13')](_0x736346);try{const _0x2477dd=crypto[a0_0x509e('0x30')](a0_0x509e('0x4a'),this[a0_0x509e('0x62')],_0x59c021[a0_0x509e('0x45')](0x0,0x10));const _0x2450a7=_0x59c021[a0_0x509e('0x45')](0x10);const _0x5336a9=_0x2477dd['update'](_0x2450a7);const _0x3b802c=Buffer[a0_0x509e('0x43')]([_0x5336a9,_0x2477dd[a0_0x509e('0xa4')]()]);fs['writeFileSync'](_0x736346,_0x3b802c);}catch(_0x1f68e7){throw new Error(a0_0x509e('0x8f'));}}}class CloudRemoteCache{constructor(_0xc1af60,_0x216cf5,_0x1ed034,_0x267ea7){this['messages']=_0xc1af60;this['urls']=_0x216cf5;this[a0_0x509e('0x8')]=_0x1ed034;this[a0_0x509e('0x51')]=_0x267ea7;this[a0_0x509e('0xb3')]=[];}[a0_0x509e('0xa7')](_0x25d213,_0x58398f){return __awaiter(this,void 0x0,void 0x0,function*(){if(this[a0_0x509e('0x5a')][a0_0x509e('0x8e')])return![];try{const _0x4116a4=(yield this[a0_0x509e('0x4f')])[_0x25d213];if(!_0x4116a4||!_0x4116a4[a0_0x509e('0xb9')]){this[a0_0x509e('0x8')][a0_0x509e('0x6f')][_0x25d213]='cache-miss';return![];}if(CloudRemoteCache[a0_0x509e('0x7')]){output_1[a0_0x509e('0x20')]['note']({'title':a0_0x509e('0x9e')+_0x25d213});}const _0x39b95a=this[a0_0x509e('0x68')](_0x25d213,_0x58398f);yield this[a0_0x509e('0x5f')](_0x4116a4[a0_0x509e('0xb9')],_0x39b95a);this[a0_0x509e('0x47')](_0x25d213,_0x58398f);if(CloudRemoteCache[a0_0x509e('0x7')]){output_1[a0_0x509e('0x20')][a0_0x509e('0x35')]({'title':'Nx\x20Cloud:\x20Cache\x20hit\x20'+_0x25d213});}this[a0_0x509e('0x8')]['statuses'][_0x25d213]=a0_0x509e('0x84');return!![];}catch(_0x1b0352){if(_0x1b0352[a0_0x509e('0x9')]&&_0x1b0352[a0_0x509e('0x9')][a0_0x509e('0xb6')]===0x194){if(CloudRemoteCache[a0_0x509e('0x7')]){output_1[a0_0x509e('0x20')][a0_0x509e('0x35')]({'title':'Nx\x20Cloud:\x20Cache\x20miss\x20'+_0x25d213});}}else{this[a0_0x509e('0x5a')][a0_0x509e('0x8e')]=this[a0_0x509e('0x5a')][a0_0x509e('0x27')](_0x1b0352,a0_0x509e('0x79'));}this[a0_0x509e('0x8')][a0_0x509e('0x6f')][_0x25d213]=a0_0x509e('0x52');return![];}});}[a0_0x509e('0x65')](_0x1ec733,_0x2dfab7){return __awaiter(this,void 0x0,void 0x0,function*(){if(this['messages']['cacheError'])return![];const _0x8a0bb0=Promise[a0_0x509e('0x38')]()[a0_0x509e('0x6c')](()=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x3dd532=(yield this[a0_0x509e('0x4f')])[_0x1ec733];if(!_0x3dd532)return![];if(!_0x3dd532[a0_0x509e('0x12')]){if(CloudRemoteCache[a0_0x509e('0x7')]){output_1['output'][a0_0x509e('0x35')]({'title':a0_0x509e('0x8a')+_0x1ec733+a0_0x509e('0x4d')});}return!![];}try{if(CloudRemoteCache[a0_0x509e('0x7')]){output_1[a0_0x509e('0x20')]['note']({'title':'Nx\x20Cloud:\x20Storing\x20'+_0x1ec733});}const _0x4bbcbc=yield this[a0_0x509e('0x9a')](_0x1ec733,_0x2dfab7);yield this['uploadFile'](_0x3dd532[a0_0x509e('0x12')],_0x4bbcbc);if(CloudRemoteCache['VERBOSE_LOGGING']){output_1[a0_0x509e('0x20')][a0_0x509e('0x35')]({'title':'Nx\x20Cloud:\x20Stored\x20'+_0x1ec733});}return!![];}catch(_0x561180){this[a0_0x509e('0x5a')]['cacheError']=this[a0_0x509e('0x5a')][a0_0x509e('0x27')](_0x561180,a0_0x509e('0x79'));return![];}}));this[a0_0x509e('0xb3')][a0_0x509e('0x55')](_0x8a0bb0);return _0x8a0bb0;});}[a0_0x509e('0x93')](){return Promise[a0_0x509e('0x11')](this[a0_0x509e('0xb3')]);}[a0_0x509e('0x68')](_0xc2a894,_0x5a9575){return path['join'](_0x5a9575,_0xc2a894+a0_0x509e('0x7d'));}[a0_0x509e('0x5f')](_0x381a06,_0x147b29){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5f3001=yield axios(_0x381a06,{'method':a0_0x509e('0x31'),'responseType':a0_0x509e('0xa2'),'maxContentLength':0x3e8*0x3e8*0xc8,'maxBodyLength':0x3e8*0x3e8*0xc8,'timeout':NX_CLOUD_NO_TIMEOUTS?UNLIMITED_TIMEOUT:0xea60});if(this[a0_0x509e('0x51')][a0_0x509e('0x5b')]()){yield new Promise(_0x4a7d79=>{const _0x27fbe3=_0x5f3001[a0_0x509e('0x80')][a0_0x509e('0x91')](fs['createWriteStream'](_0x147b29));_0x27fbe3['on']('close',()=>_0x4a7d79());});this[a0_0x509e('0x51')][a0_0x509e('0xd')](_0x147b29);const _0x192f3d=fs[a0_0x509e('0xb')](_0x147b29)[a0_0x509e('0x91')](tar['x']({'cwd':path['dirname'](_0x147b29)}));return new Promise(_0x2386e8=>{_0x192f3d['on'](a0_0x509e('0xb7'),()=>{_0x2386e8();});});}else{const _0x5c9197=_0x5f3001[a0_0x509e('0x80')][a0_0x509e('0x91')](tar['x']({'cwd':path[a0_0x509e('0x46')](_0x147b29)}));return new Promise(_0x2b7354=>{_0x5c9197['on'](a0_0x509e('0xb7'),()=>{_0x2b7354();});});}});}[a0_0x509e('0x47')](_0x25e30d,_0x429177){fs[a0_0x509e('0x4c')](path[a0_0x509e('0x7c')](_0x429177,_0x25e30d+'.commit'),a0_0x509e('0x41'));}[a0_0x509e('0x9a')](_0x24b9f4,_0x4fb662){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x950b46=this[a0_0x509e('0x68')](_0x24b9f4,_0x4fb662);yield tar['c']({'gzip':!![],'file':_0x950b46,'cwd':_0x4fb662},[_0x24b9f4]);if(this[a0_0x509e('0x51')][a0_0x509e('0x5b')]()){this[a0_0x509e('0x51')][a0_0x509e('0x81')](_0x950b46);}return _0x950b46;});}[a0_0x509e('0x17')](_0x3745f6,_0x355307){return __awaiter(this,void 0x0,void 0x0,function*(){yield axios(_0x3745f6,{'method':'PUT','data':fs[a0_0x509e('0x13')](_0x355307),'headers':{'Content-Type':'application/octet-stream'},'maxContentLength':0x3e8*0x3e8*0xc8,'maxBodyLength':0x3e8*0x3e8*0xc8,'timeout':NX_CLOUD_NO_TIMEOUTS?UNLIMITED_TIMEOUT:0x1d4c0});});}}CloudRemoteCache['VERBOSE_LOGGING']=process[a0_0x509e('0x1b')][a0_0x509e('0x44')];class TaskRunnerLifeCycle{constructor(_0x280f92,_0x4060a3,_0x7fd2cc,_0x5adabd){this['runContext']=_0x280f92;this[a0_0x509e('0x0')]=_0x4060a3;this[a0_0x509e('0x8d')]=_0x7fd2cc;this['cacheableOperations']=_0x5adabd;this[a0_0x509e('0x40')]=[];this[a0_0x509e('0x60')]=uuid_1['v4']();}[a0_0x509e('0x7a')](_0x1a8809){const _0x179d58=Object['assign']({},_0x1a8809['overrides']||{});if(_0x1a8809[a0_0x509e('0x85')][a0_0x509e('0xbb')]){_0x179d58[a0_0x509e('0xbb')]=_0x1a8809[a0_0x509e('0x85')]['configuration'];}const _0xaa682b=Object[a0_0x509e('0x25')](_0x179d58)[a0_0x509e('0x29')]((_0x29a532,_0xf0d2cf)=>_0x29a532+a0_0x509e('0x4b')+_0xf0d2cf+'='+_0x179d58[_0xf0d2cf],'');this[a0_0x509e('0x40')]['push']({'taskId':_0x1a8809['id']+'-'+this['uniqRunId'],'startTime':new Date()[a0_0x509e('0x6a')](),'target':_0x1a8809[a0_0x509e('0x85')]['target'],'projectName':_0x1a8809['target']['project'],'hash':_0x1a8809[a0_0x509e('0x2a')],'hashDetails':_0x1a8809[a0_0x509e('0x23')],'params':_0xaa682b});}[a0_0x509e('0xe')](_0x48cf63,_0x152b23){const _0x581ca2=this[a0_0x509e('0x40')][a0_0x509e('0x7f')](_0xa00290=>_0xa00290['taskId']===_0x48cf63['id']+'-'+this['uniqRunId']);if(!_0x581ca2){throw new Error(a0_0x509e('0x5e')+_0x48cf63['id']);}_0x581ca2[a0_0x509e('0x3a')]=new Date()['toISOString']();_0x581ca2['status']=_0x152b23;if(this[a0_0x509e('0x8')][a0_0x509e('0x6f')][_0x48cf63[a0_0x509e('0x2a')]]){_0x581ca2[a0_0x509e('0xad')]=this[a0_0x509e('0x8')][a0_0x509e('0x6f')][_0x48cf63[a0_0x509e('0x2a')]];}else{if(this[a0_0x509e('0x18')]['indexOf'](_0x48cf63[a0_0x509e('0x85')][a0_0x509e('0x85')])>-0x1){_0x581ca2[a0_0x509e('0xad')]=a0_0x509e('0x32');}else{_0x581ca2[a0_0x509e('0xad')]=a0_0x509e('0x52');}}if(this[a0_0x509e('0x8d')]&&!INVOKED_BY_RUNNER){_0x581ca2['terminalOutput']=this[a0_0x509e('0x9f')](_0x48cf63);}}[a0_0x509e('0x9f')](_0x406b0f){let _0x4056cc;if(this[a0_0x509e('0x0')]){if(this['cacheDirectory'][a0_0x509e('0x16')]('./')){_0x4056cc=path_1[a0_0x509e('0x7c')](app_root_1[a0_0x509e('0xb8')],this['cacheDirectory']);}else{_0x4056cc=this['cacheDirectory'];}}else{_0x4056cc=path_1[a0_0x509e('0x7c')](app_root_1[a0_0x509e('0xb8')],a0_0x509e('0xa1'),a0_0x509e('0x77'),'nx');}try{const _0x309d01=this['readTerminalOutputFile'](_0x4056cc,_0x406b0f[a0_0x509e('0x2a')]);return _0x309d01['length']>TaskRunnerLifeCycle[a0_0x509e('0xb5')]?_0x309d01[a0_0x509e('0x45')](0x0,TaskRunnerLifeCycle[a0_0x509e('0xb5')])+a0_0x509e('0x64'):_0x309d01;}catch(_0xaa840b){return'';}}['readTerminalOutputFile'](_0x12911f,_0xa07009){try{return fs[a0_0x509e('0x13')](path['join'](_0x12911f,'terminalOutputs',_0xa07009))[a0_0x509e('0x83')]();}catch(_0x31ffac){try{return fs[a0_0x509e('0x13')](path['join'](_0x12911f,_0xa07009,a0_0x509e('0xb0')))[a0_0x509e('0x83')]();}catch(_0x5b2908){return'';}}}}TaskRunnerLifeCycle['MAX_CHARACTERS']=0x249f0;class MessageReporter{constructor(_0x218486){this['options']=_0x218486;this['cacheError']=null;this['apiError']=null;this['message']=null;}get[a0_0x509e('0x2d')](){return this[a0_0x509e('0x8e')]||this['apiError'];}[a0_0x509e('0x9d')](){if(this[a0_0x509e('0x2d')]){const _0xf14a2c=[];if(this[a0_0x509e('0x8e')]){_0xf14a2c[a0_0x509e('0x55')]('-\x20'+this[a0_0x509e('0x8e')]);}if(this['apiError']&&this[a0_0x509e('0x2e')]!==this['cacheError']){_0xf14a2c[a0_0x509e('0x55')]('-\x20'+this[a0_0x509e('0x2e')]);}output_1['output']['warn']({'title':a0_0x509e('0x53'),'bodyLines':_0xf14a2c});}if(this[a0_0x509e('0x66')]){printMessage(this[a0_0x509e('0x66')]);}}[a0_0x509e('0x27')](_0x4c3d73,_0x422c63){if(_0x4c3d73[a0_0x509e('0x74')]===a0_0x509e('0x4')){return a0_0x509e('0x9b')+_0x422c63+',\x20code:\x20'+_0x4c3d73[a0_0x509e('0x74')]+').\x20Try\x20invoking\x20the\x20command\x20with\x20the\x20NX_CLOUD_NO_TIMEOUTS\x20env\x20variable\x20set\x20to\x20\x27true\x27.';}else if(_0x4c3d73[a0_0x509e('0x74')]===a0_0x509e('0x75')||_0x4c3d73[a0_0x509e('0x74')]===a0_0x509e('0x73')||_0x4c3d73[a0_0x509e('0x74')]===a0_0x509e('0x95')||_0x4c3d73[a0_0x509e('0x74')]==='EPROTO'){return'Cannot\x20connect\x20to\x20remote\x20cache\x20(scope:\x20'+_0x422c63+',\x20code:\x20'+_0x4c3d73['code']+').';}else if(_0x4c3d73[a0_0x509e('0x9')]&&_0x4c3d73[a0_0x509e('0x9')][a0_0x509e('0xb6')]===0x191){return _0x4c3d73['response'][a0_0x509e('0x80')][a0_0x509e('0x66')]?_0x4c3d73[a0_0x509e('0x9')]['data'][a0_0x509e('0x66')]:_0x4c3d73[a0_0x509e('0x9')]['data'];}else if(_0x4c3d73[a0_0x509e('0x9')]&&_0x4c3d73[a0_0x509e('0x9')]['status']===0x192){if(this[a0_0x509e('0xa8')][a0_0x509e('0x48')]===![])return null;return _0x4c3d73[a0_0x509e('0x9')][a0_0x509e('0x80')][a0_0x509e('0x66')]?_0x4c3d73[a0_0x509e('0x9')][a0_0x509e('0x80')][a0_0x509e('0x66')]:_0x4c3d73[a0_0x509e('0x9')]['data'];}else{let _0x2e4efa='';if(_0x4c3d73['response']&&_0x4c3d73['response'][a0_0x509e('0x80')]&&_0x4c3d73['response'][a0_0x509e('0x80')]['message']){_0x2e4efa='.\x20'+_0x4c3d73[a0_0x509e('0x9')]['data'][a0_0x509e('0x66')];}else if(_0x4c3d73[a0_0x509e('0x9')]&&_0x4c3d73[a0_0x509e('0x9')][a0_0x509e('0x80')]){_0x2e4efa='.\x20'+_0x4c3d73[a0_0x509e('0x9')][a0_0x509e('0x80')];}const _0x29cf5c=_0x4c3d73[a0_0x509e('0x74')]?a0_0x509e('0x5')+_0x4c3d73['code']+')':'';return''+_0x4c3d73[a0_0x509e('0x66')]+_0x2e4efa+_0x29cf5c;}}}class EndOfRunMessage{constructor(_0xc5cd69,_0x25063f){this['messages']=_0xc5cd69;this[a0_0x509e('0x8')]=_0x25063f;this[a0_0x509e('0x40')]=[];this[a0_0x509e('0x76')]();}['patchReporters'](){try{const _0x1959fc=require(a0_0x509e('0x15'));const _0x37054e=_0x1959fc[a0_0x509e('0x72')][a0_0x509e('0x1d')][a0_0x509e('0x2c')];const _0x2d4a92=this;_0x1959fc[a0_0x509e('0x72')]['prototype'][a0_0x509e('0x2c')]=function(){_0x37054e[a0_0x509e('0xf')](this,arguments);_0x2d4a92[a0_0x509e('0x3b')]();};}catch(_0x6a568b){}try{const _0x2c738c=require(a0_0x509e('0x7b'));const _0x2860c2=_0x2c738c[a0_0x509e('0x2b')][a0_0x509e('0x1d')][a0_0x509e('0x2c')];const _0x5a9dec=this;_0x2c738c[a0_0x509e('0x2b')]['prototype'][a0_0x509e('0x2c')]=function(){_0x2860c2[a0_0x509e('0xf')](this,arguments);_0x5a9dec[a0_0x509e('0x3b')]();};}catch(_0x4623f8){}try{const _0x4a6057=require(a0_0x509e('0x3'));const _0x2f94ec=_0x4a6057[a0_0x509e('0xa6')][a0_0x509e('0x1d')][a0_0x509e('0x2c')];const _0x27d24c=this;_0x4a6057[a0_0x509e('0xa6')][a0_0x509e('0x1d')][a0_0x509e('0x2c')]=function(){_0x2f94ec[a0_0x509e('0xf')](this,arguments);_0x27d24c[a0_0x509e('0x3b')]();};}catch(_0x1a43f7){}}[a0_0x509e('0x3b')](){if(this[a0_0x509e('0x5a')][a0_0x509e('0x2d')])return;if(INVOKED_BY_RUNNER)return;const _0x4d4844=this[a0_0x509e('0x40')][a0_0x509e('0x3d')](_0x25beac=>this[a0_0x509e('0x8')][a0_0x509e('0x6f')][_0x25beac[a0_0x509e('0x2a')]]==='remote-cache-hit')['map'](_0xd80423=>_0xd80423[a0_0x509e('0x94')]);if(_0x4d4844[a0_0x509e('0x6e')]===0x0&&!this[a0_0x509e('0x8')]['runUrl']){return;}const _0x1b8542=_0x4d4844[a0_0x509e('0x6e')]===0x1?_0x4d4844[0x0]:_0x4d4844[a0_0x509e('0x6e')]+a0_0x509e('0x88');const _0x5bec65=[];if(_0x4d4844[a0_0x509e('0x6e')]>0x0){_0x5bec65['push']('Results\x20for\x20'+_0x1b8542+a0_0x509e('0x21'));}if(this[a0_0x509e('0x8')]['runUrl']){_0x5bec65[a0_0x509e('0x55')](a0_0x509e('0x6')+this['runContext'][a0_0x509e('0x19')]);}if(_0x5bec65['length']>0x0){printMessage(_0x5bec65[a0_0x509e('0x7c')]('\x20'));}}}function printMessage(_0x1a48d8){const _0x1ba4d0=output_1[a0_0x509e('0x20')][a0_0x509e('0xb2')][a0_0x509e('0x26')](_0x1a48d8);output_1[a0_0x509e('0x20')][a0_0x509e('0x61')]();output_1['output'][a0_0x509e('0x78')]({'label':chalk['reset']['inverse'][a0_0x509e('0xa')][a0_0x509e('0x71')]('grey')(a0_0x509e('0xa3')),'title':chalk[a0_0x509e('0x71')](a0_0x509e('0xaa'))(_0x1ba4d0)});output_1[a0_0x509e('0x20')]['addNewline']();}function getMachineInfo(_0x2b4a94){let _0xda517a='';if(_0x2b4a94[a0_0x509e('0xae')]){try{_0xda517a=node_machine_id_1['machineIdSync']();}catch(_0x1a4465){}}return{'machineId':_0xda517a,'platform':os[a0_0x509e('0x4e')](),'version':os[a0_0x509e('0x34')]?os[a0_0x509e('0x34')]():'','cpuCores':os['cpus']()[a0_0x509e('0x6e')]};}function createApi(_0xaaa4e9,_0x1b8064,_0x221f50){const _0x302d17=_0x1b8064[a0_0x509e('0xa0')]||'https://api.nrwl.io';const _0x54555b=getMachineInfo(_0x1b8064);if(process[a0_0x509e('0x1b')][a0_0x509e('0x42')]){return new CloudApi(_0xaaa4e9,_0x221f50,_0x302d17,process[a0_0x509e('0x1b')][a0_0x509e('0x42')],_0x54555b);}else{return new CloudApi(_0xaaa4e9,_0x221f50,_0x302d17,_0x1b8064['accessToken'],_0x54555b);}}function parseCommand(){return'nx\x20'+process[a0_0x509e('0x22')]['slice'](0x2)['join']('\x20');}function runGroup(){if(process[a0_0x509e('0x1b')][a0_0x509e('0x57')]!==undefined){return process[a0_0x509e('0x1b')][a0_0x509e('0x57')];}if(process[a0_0x509e('0x1b')][a0_0x509e('0xba')]!==undefined){return process[a0_0x509e('0x1b')][a0_0x509e('0x33')];}if(process[a0_0x509e('0x1b')][a0_0x509e('0x97')]!==undefined){return process[a0_0x509e('0x1b')]['TRAVIS_BUILD_ID'];}if(process[a0_0x509e('0x1b')][a0_0x509e('0x96')]!==undefined){return process['env']['CI_MERGE_REQUEST_SOURCE_BRANCH_NAME'];}return undefined;}function branch(){if(process[a0_0x509e('0x1b')][a0_0x509e('0x3e')]!==undefined){return process[a0_0x509e('0x1b')][a0_0x509e('0x3e')];}if(process[a0_0x509e('0x1b')]['CIRCLECI']!==undefined){if(process[a0_0x509e('0x1b')][a0_0x509e('0x8b')]!==undefined){return process[a0_0x509e('0x1b')]['CIRCLE_PR_NUMBER'];}else if(process[a0_0x509e('0x1b')][a0_0x509e('0x8c')]!==undefined){const _0x248a7a=process[a0_0x509e('0x1b')][a0_0x509e('0x8c')]['split']('/');return _0x248a7a[_0x248a7a[a0_0x509e('0x6e')]-0x1];}else if(process[a0_0x509e('0x1b')]['CIRCLE_BRANCH']!==undefined){return process[a0_0x509e('0x1b')][a0_0x509e('0xaf')];}}if(process[a0_0x509e('0x1b')][a0_0x509e('0x1e')]!==undefined){return process[a0_0x509e('0x1b')]['TRAVIS_PULL_REQUEST'];}return undefined;}const nxCloudTasksRunner=(_0x2ea4f1,_0x1b30be,_0x27a752)=>{if(process[a0_0x509e('0x1b')][a0_0x509e('0x42')]||_0x1b30be[a0_0x509e('0x86')]){const _0x476fd5={'statuses':{}};const _0x437568=new MessageReporter(_0x1b30be);const _0x409c16=createApi(_0x437568,_0x1b30be,_0x476fd5);const _0x436349=new EndOfRunMessage(_0x437568,_0x476fd5);const _0x46a493=_0x409c16[a0_0x509e('0x1f')](_0x2ea4f1['map'](_0x264d97=>_0x264d97['hash']));const _0x562810=new Date()[a0_0x509e('0x6a')]();const _0x95109b=new TaskRunnerLifeCycle(_0x476fd5,_0x1b30be[a0_0x509e('0x0')],_0x1b30be[a0_0x509e('0x2f')]===undefined?!![]:_0x1b30be[a0_0x509e('0x2f')],_0x1b30be[a0_0x509e('0x18')]||[]);const _0x4226e4=new E2EEncryption(process['env']['NX_CLOUD_ENCRYPTION_KEY']||_0x1b30be[a0_0x509e('0x62')]);const _0x1d9018=new CloudRemoteCache(_0x437568,_0x46a493,_0x476fd5,_0x4226e4);const _0x5b354e=tasks_runner_v2_1[a0_0x509e('0xc')](_0x2ea4f1,Object[a0_0x509e('0x10')](Object[a0_0x509e('0x10')]({},_0x1b30be),{'remoteCache':_0x1d9018,'lifeCycle':_0x95109b}),_0x27a752);const _0x2a6fd0=new rxjs_1[(a0_0x509e('0x36'))]();_0x5b354e[a0_0x509e('0x6b')]({'next':_0x2cbdda=>_0x2a6fd0['next'](_0x2cbdda),'error':_0x199d3d=>_0x2a6fd0[a0_0x509e('0xa9')](_0x199d3d),'complete':()=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x19a8d0=new Date()[a0_0x509e('0x6a')]();yield Promise[a0_0x509e('0x11')]([_0x1d9018['waitForStoreRequestsToComplete'](),_0x409c16[a0_0x509e('0xb1')]({'command':parseCommand(),'startTime':_0x562810,'endTime':_0x19a8d0,'scan':_0x1b30be['scan']===undefined?!![]:_0x1b30be[a0_0x509e('0x2f')],'inner':INVOKED_BY_RUNNER,'branch':branch(),'runGroup':runGroup()},_0x95109b[a0_0x509e('0x40')])]);_0x437568[a0_0x509e('0x9d')]();_0x436349[a0_0x509e('0x40')]=_0x95109b[a0_0x509e('0x40')];_0x2a6fd0[a0_0x509e('0x24')]();})});return _0x2a6fd0;}else{return tasks_runner_v2_1[a0_0x509e('0xc')](_0x2ea4f1,_0x1b30be,_0x27a752);}};exports['default']=nxCloudTasksRunner;